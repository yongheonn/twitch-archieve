<!DOCTYPE html>
<html>
  <head>
    <title>youtube archieve</title>
    <link rel="stylesheet" href="/stylesheets/style.css" />
  </head>
  <body>
    <% for(var streamer of streamerIds){ %>
    <h2><%= streamer %></h2>
    <% for(var vidId in info[streamer]) { var vidInfo = info[streamer][vidId] %>
    <h3><%= vidId %></h3>
    <br />
    <span>제목: <%= vidInfo.title %></span>
    <br />
    <span>게임: <%= vidInfo.game %></span>
    <br />
    <span>화질: <%= vidInfo.quality %></span>
    <br />
    <span>상태: <%= statusMessage[vidInfo.status]%></span>
    <br /><br />
    <% } }%>
    <span>error count: <%= errorCount%></span>
    <br />
    <% const utc = resetTime.getTime() + resetTime.getTimezoneOffset() * 60 *
    1000; const KR_TIME_DIFF = 9 * 60 * 60 * 1000; const kr_curr = new Date(utc
    + KR_TIME_DIFF); %>
    <span>유튜브 리셋 시간: <%= kr_curr.toLocaleString()%></span>
    <br />
    <input type="text" id="exceptGames" value="<%= exceptGames%>" />>
    <button onclick="onClickHandler()">변경 저장</button>
  </body>
  <script>
    const option = {
      method: "POST",
      body: "",
      headers: {
        Accept: "application/json",
        "Content-Type": "application/json",
      },
    };
    async function onClickHandler() {
      const response = await fetch(
        "http://138.2.37.53:3000/except_games",
        option
      );
      if (response.status === 200) {
        alert("성공");
      } else {
        alert("오류 발생");
      }
    }
  </script>
</html>
